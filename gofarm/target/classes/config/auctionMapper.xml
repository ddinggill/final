<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper    
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="auction">
 	
 	<select id="count" resultType="int">
 			select count(*) from auction
 	</select>
 	
 	<select id="List" resultType="com.mycompany.gofarm.auction.dto.AuctionDTO"
 		parameterType="com.mycompany.gofarm.auction.dto.PageDTO">
 	<![CDATA[
 		select b.* from (select rownum as rm , a.* from(
		select * from auction order by auctioncode desc)a)b
		where b.rm>=#{startRow} and b.rm<=#{endRow}
 	]]>
 	</select>
 	
 	<select id="view" parameterType="int" 
 	resultType="com.mycompany.gofarm.auction.dto.AuctionDTO">
 		select * from auction where auctioncode = #{num}
 	</select>
 	
 	<insert id="recipe" parameterType="com.mycompany.gofarm.auction.dto.Au_recipeDTO">
 	 insert into au_recipe values(#{auctioncode} , #{br_user} , #{br_price} , sysdate)
 	</insert>
 	
 	<update id="ctpriceUpdate" parameterType="com.mycompany.gofarm.auction.dto.Au_recipeDTO">
 			update auction set ctprice = #{br_price} where auctioncode = #{auctioncode}
 	</update>
 	
 	<insert id="auctionIns" parameterType="com.mycompany.gofarm.auction.dto.AuctionDTO">
 		insert into auction values(AUTION_SEQ.nextval , #{usercode} ,#{au_name} , #{au_file},
#{stprice}, #{stprice}, null, 0, to_date(sysdate, 'YYYY-MM-DD HH24:MI') ,#{fin_time} , #{content})
 	
 	</insert>
 	
 	
</mapper>
